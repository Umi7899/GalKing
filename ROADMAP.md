# GalKing AI 日语学习助手 — 开发路线图

> 最后更新: 2026-02-08
> 当前版本: v1.1 (feature/lesson-content-expansion)

---

## 项目现状总结

### 已完成功能

- [x] 5步日常训练框架（语法速通/举一反三/词汇连击/句子应用/今日总结）
- [x] AI 教练系统 Sakura JK（错题解析/句子分析/自适应点评）
- [x] 离线评分引擎 + LLM 7天缓存 + 离线降级 mock
- [x] 语法掌握度追踪 + 词汇强度系统 + 课程自动解锁
- [x] 会话持久化（断点续训）
- [x] 快速访问模式（语法卡片/词汇挑战/句子道场）
- [x] TTS 日语语音朗读
- [x] API 配置 + 连接测试
- [x] 课程数据 JSON 导入机制
- [x] 完整导航体系（底部 Tab + Stack）
- [x] 回顾系统（教练点评 + 题目回顾 + AI 错题解析）

### 已知不足

- CourseScreen / VocabScreen / StatsScreen 仅基础实现
- 测试覆盖为零
- 无 Error Boundary
- 样式硬编码，无统一主题系统
- 组件复用率低（仅 MistakeExplainModal 可复用）
- 课程数据量不足（N5-N3 覆盖不全）
- 无国际化框架
- 无新手引导 / 通知提醒
- console.log 未在生产构建中移除

---

## TODO List

### P0 — 核心体验提升

- [x] **完善 StatsScreen 统计可视化**
  - [x] 学习热力图（类似 GitHub contribution）
  - [x] 掌握度环形图（语法/词汇维度）
  - [x] 正确率趋势柱状图（语法/词汇/句子三维度）
  - [x] 累计学习时长统计
  - [x] 数据查询接口扩展（db/queries 层）

- [x] **完善 CourseScreen 课程详情**
  - [x] 课程进度条 + 各语法点掌握度展示
  - [x] 学习路径图（连接线 + 完成/进行中/锁定状态）
  - [x] 课程内语法/词汇/句子数量预览
  - [x] 展开课程查看详情（语法掌握度条 + 例句预览 + TTS）
  - [x] 总体进度概览卡片

- [x] **完善 VocabScreen 词汇管理**
  - [x] 搜索 + 筛选（全部/薄弱/已掌握/未学习）
  - [x] 词汇掌握度指示器（彩色侧边条 + 进度条 + 标签）
  - [x] 全部词汇浏览模式
  - [x] 词汇统计面板（总计/已掌握/薄弱/未学习）
  - [x] 阻碍项标记

### P1 — 学习效果增强

- [ ] **SRS 间隔重复系统**
  - [ ] 基于遗忘曲线的复习调度算法
  - [ ] 智能选题（优先弱项语法 + 即将遗忘词汇）
  - [ ] 对接现有 nextReviewDate 字段
  - [ ] 复习队列 UI

- [ ] **听力/发音练习模块**
  - [ ] 听句选意（利用 TTS）
  - [ ] 听写练习
  - [ ] 语音识别跟读评分（条件允许时）

- [ ] **AI 动态生成练习题**
  - [ ] 利用 generate_drills LLM 特性扩展
  - [ ] 动态难度调整
  - [ ] 突破固定题库限制

### P2 — 用户粘性与体验

- [ ] **通知与提醒系统**
  - [ ] 每日学习打卡提醒 (expo-notifications)
  - [ ] 连击即将断裂预警

- [ ] **统一主题系统**
  - [ ] 抽取颜色/字体/间距为全局 theme
  - [ ] 支持亮色/暗色模式切换

- [ ] **新手引导流程**
  - [ ] 首次启动功能介绍
  - [ ] 训练流程步骤提示

- [ ] **成就/徽章系统**
  - [ ] 连击天数成就
  - [ ] 语法全通关徽章
  - [ ] 词汇量里程碑

### P3 — 扩展能力

- [ ] **课程数据扩充与远程更新**
  - [ ] 扩充 N5-N3 完整语法/词汇/句子数据
  - [ ] 支持从服务器拉取新课程包

- [ ] **数据导出/云同步**
  - [ ] 学习进度导出/导入
  - [ ] 多设备同步

- [ ] **单元测试覆盖**
  - [ ] engine/ (planGenerator, scorer, progressManager)
  - [ ] db/queries/ 数据层
  - [ ] LLM client 集成测试

---

## 版本规划

| 版本 | 目标 | 对应优先级 |
|------|------|-----------|
| v1.2 | 统计可视化 + 课程详情 + 词汇管理 | P0 |
| v1.3 | SRS 间隔重复 + 听力练习 | P1 |
| v1.4 | 通知提醒 + 主题系统 + 新手引导 | P2 |
| v2.0 | 课程远程更新 + 云同步 + 测试覆盖 | P3 |

---

## 开发日志

### 2026-02-08
- 完成项目全局梳理
- 创建 ROADMAP.md
- 创建分支 feature/p0-core-enhancement
- **P0 全部完成:**
  - StatsScreen: 新增热力图、掌握度环形图、正确率趋势柱状图、累计学习时长
  - CourseScreen: 新增总体进度条、路径图连接线、展开详情（语法掌握度条 + 词汇/句子计数 + TTS 例句预览）
  - VocabScreen: 新增搜索筛选、掌握度指示器、全部词汇模式、统计面板
  - 扩展 db/queries: getActivityHeatmap, getAccuracyTrend, getTotalLearningTime, getMasteryOverview
